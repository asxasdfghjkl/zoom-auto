(function(m,h){typeof exports=="object"&&typeof module!="undefined"?h(require("react")):typeof define=="function"&&define.amd?define(["react"],h):(m=typeof globalThis!="undefined"?globalThis:m||self,h(m.React))})(this,function(m){"use strict";function h(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var u=h(m);const p=window.open("","_blank","width=800, height=780, toolbar=1"),w=p.document;w.write(`
<html>
<head>
<title>Zoom\u81EA\u52D5\u7B49\u5019\u5BA4\u5916\u639B</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
<div id="root"></div>
</body>
</html>
`);const R=w.body,O=w.querySelector("#root"),C=window,b=C.document;function _(e){const t=new MouseEvent("mouseover",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function B(){return[...b.querySelectorAll(".waiting-room-list-container .participants-li")].map(t=>({name:t.querySelector(".participants-item__display-name").textContent,allow:F(t)}))}function F(e){return()=>{_(e),setTimeout(()=>{e.querySelector(".participants-item__right-section button.btn-primary").click()},10)}}function D(){const e=".participants-section-container";if(b.querySelector(e))return!0;const n=b.querySelector('div[feature-type="participants"] button')||[...b.querySelectorAll('div.more-button a[role="menuitem"]')].find(o=>["\u8207\u6703\u8005","Participants"].includes(o.textContent));return n&&n.click(),!!b.querySelector(e)}var j={exports:{}},g={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var E=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;function L(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function T(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(c){return t[c]});if(o.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(c){a[c]=c}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}T();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=u.default,x=60103;if(g.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var S=Symbol.for;x=S("react.element"),g.Fragment=S("react.fragment")}var I=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$=Object.prototype.hasOwnProperty,U={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var o,a={},c=null,i=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)$.call(t,o)&&!U.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)a[o]===void 0&&(a[o]=t[o]);return{$$typeof:x,type:e,key:c,ref:i,props:a,_owner:I.current}}g.jsx=A,g.jsxs=A,j.exports=g;const r=j.exports.jsx,d=j.exports.jsxs;function M({names:e,onSave:t,onClose:n}){const[o,a]=React.useState(e.join(`
`)),c=React.useCallback(l=>{a(l.target.value)},[a]),i=()=>{const l=new Set(o.split(`
`).map(v=>v.trim()).filter(v=>v));t([...l])};return ReactDOM.createPortal(r("div",{className:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-hidden":"true",children:r("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:d("div",{className:"modal-content",children:[r("div",{className:"modal-header",children:r("h5",{className:"modal-title",children:"\u7DE8\u8F2F\u5141\u8A31\u540D\u55AE"})}),r("div",{className:"modal-body",children:r("textarea",{className:"form-control w-100",rows:10,value:o,onChange:c})}),d("div",{className:"modal-footer",children:[r("button",{type:"submit",className:"btn btn-primary",onClick:i,children:"\u5132\u5B58"}),r("button",{className:"btn btn-secondary",onClick:n,children:"\u53D6\u6D88"})]})]})})}),R)}function Z({onChange:e=t=>{}}){const[t,n]=React.useState([]),[o,a]=React.useState(!1);return d("div",{className:"px-3 d-flex flex-column h-100",children:[r("button",{className:"btn btn-primary mb-2",onClick:()=>a(!0),children:"\u7DE8\u8F2F\u5141\u8A31\u540D\u55AE"}),d("ul",{className:"list-group flex-grow-1 overflow-auto",children:[t.map(c=>r("li",{className:"list-group-item",children:c},c)),t.length===0&&r("li",{className:"list-group-item",children:"\u7A7A\u767D\u7684\u5141\u8A31\u6E05\u55AE"})]}),o&&r(M,{names:t,onSave:c=>{n(c),a(!1),e(c)},onClose:()=>a(!1)})]})}function V({logs:e}){const t=u.default.useRef(null);return u.default.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[e]),r("div",{ref:t,style:{whiteSpace:"pre-wrap"},className:"h-100 overflow-auto card",children:r("div",{className:"card-body",children:e.map(n=>d("div",{className:`alert alert-${n.type||"light"}`,children:[r("strong",{children:r("time",{children:n.time.toLocaleTimeString()})})," ",r("span",{children:n.message})]},+n.time))})})}function H(){const[e,t]=u.default.useState([]),n=u.default.useCallback((s,y)=>t(k=>[...k,{time:new Date,message:s,type:y}]),[t]),o=u.default.useRef(null),a=u.default.useRef([]),c=u.default.useCallback(s=>{a.current=s,n(`\u66F4\u65B0\u5141\u8A31\u540D\u55AE
`+s.join(`
`))},[n]),i=u.default.useRef([]),l=u.default.useRef(!1),v=u.default.useCallback(s=>{l.current=s.target.checked,n(`${s.target.checked?"\u958B\u59CB":"\u505C\u6B62"}\u5075\u6E2C\u7B49\u5019\u5BA4`,"info")},[n]),N=u.default.useRef(!0),Y=u.default.useCallback(s=>{N.current=s.target.checked,n(`${s.target.checked?"\u958B\u555F":"\u95DC\u9589"}\u56B4\u683C\u6A21\u5F0F`,"info")},[]);return u.default.useEffect(()=>{const s=p.setInterval(()=>{if(!l.current)return;const y=D();y!==o.current&&(y||n("\u8ACB\u958B\u555F\u8207\u6703\u8005\u8996\u7A97","danger"),o.current=y);const k=B();for(const f of k)(N.current?a.current.includes(f.name):a.current.some(J=>new RegExp(J).test(f.name)))?(console.debug(a.current,f.name),f.allow(),n(`\u5141\u8A31\u52A0\u5165\uFF1A${f.name}`,"success")):i.current.includes(f.name)||(n(`\u672A\u6388\u6B0A\uFF1A${f.name}`,"danger"),i.current.push(f.name))},1e3);p.onbeforeunload=()=>p.clearInterval(s)},[]),d("div",{className:"d-flex flex-column vh-100 vw-100 p-3",children:[d("header",{className:"mb-3 d-flex",children:[d("div",{class:"form-check mx-3",children:[r("input",{class:"form-check-input",type:"checkbox",id:"detect",defaultChecked:!1,onChange:v}),r("label",{class:"form-check-label",for:"detect",children:"\u5075\u6E2C\u7B49\u5019\u5BA4"})]}),d("div",{class:"form-check mx-3",children:[r("input",{class:"form-check-input",type:"checkbox",id:"strictCompare",defaultChecked:!0,onChange:Y}),r("label",{class:"form-check-label",for:"strictCompare",children:"\u56B4\u683C\u6A21\u5F0F"})]})]}),d("main",{className:"d-flex flex-grow-1 conatiner-fluid overflow-hidden",children:[r("div",{className:"col-12 col-md-4 h-100",children:r(Z,{onChange:c})}),r("div",{className:"col-12 col-md-8 h-100",children:r(V,{logs:e})})]})]})}ReactDOM.render(r(React.StrictMode,{children:r(H,{})}),O),C.addEventListener("beforeunload",e=>(e.returnValue="\u4F60\u78BA\u5B9A\u8981\u95DC\u9589Zoom\u6703\u8B70\u55CE\uFF1F",e.preventDefault(),!0)),C.addEventListener("unload",()=>{p.close()})});
